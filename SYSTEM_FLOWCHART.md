# DrocoProject - ì‹œìŠ¤í…œ íë¦„ë„ ë° ì„¤ëª…

## ğŸ“Š ì „ì²´ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ì»´í“¨í„° A (ë°ì´í„° ì†¡ì‹  ì¸¡)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ouster LiDAR    â”‚ ì„¼ì„œ IP: 192.168.10.2
â”‚   (í•˜ë“œì›¨ì–´)      â”‚ 10Hz, ~131,000 points/frame
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ ì´ë”ë„· UDP (7502, 7503)
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          ros2_ouster (ë“œë¼ì´ë²„)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ â€¢ PointCloud Processor (PCL)                â”‚    â”‚
â”‚  â”‚ â€¢ IMU Processor                             â”‚    â”‚
â”‚  â”‚ â€¢ Image Processor (IMG)                     â”‚    â”‚
â”‚  â”‚ â€¢ LaserScan Processor (SCAN)                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ ROS 2 Topic: /ouster/points
                   â”‚ Type: sensor_msgs/PointCloud2
                   â”‚ QoS: BestEffort
                   â”‚ Size: ~2-5 MB/frame (ì••ì¶• ì „)
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         simple_draco_bridge (ì••ì¶• ì„œë²„)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 1. PointCloud2 ìˆ˜ì‹                                    â”‚  â”‚
â”‚  â”‚ 2. Draco PointCloudë¡œ ë³€í™˜                            â”‚  â”‚
â”‚  â”‚    - NaN/Inf ê°’ í•„í„°ë§                                â”‚  â”‚
â”‚  â”‚    - ìœ„ì¹˜ ë°ì´í„° (x,y,z) ì¶”ì¶œ                         â”‚  â”‚
â”‚  â”‚    - Intensity ë°ì´í„° ì¶”ì¶œ                            â”‚  â”‚
â”‚  â”‚ 3. Draco ì••ì¶• ì—”ì§„                                     â”‚  â”‚
â”‚  â”‚    - Quantization: 11 bits                           â”‚  â”‚
â”‚  â”‚    - Speed: 5 (ê· í˜•)                                  â”‚  â”‚
â”‚  â”‚    - ì••ì¶•ë¥ : 5-10:1                                   â”‚  â”‚
â”‚  â”‚ 4. ë©”íƒ€ë°ì´í„° íŒ¨í‚¹                                     â”‚  â”‚
â”‚  â”‚    - Header (frame_id, timestamp)                    â”‚  â”‚
â”‚  â”‚    - í•„ë“œ ì •ë³´ (fields)                               â”‚  â”‚
â”‚  â”‚    - ì••ì¶•ëœ ë°”ì´ë„ˆë¦¬ ë°ì´í„°                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚                  â”‚
               â”‚ TCP ì†Œì¼“         â”‚ ROS 2 Topic: /lidar/compressed
               â”‚ í¬íŠ¸: 8888       â”‚ (ë¡œì»¬ í¼ë¸”ë¦¬ì‹œ)
               â”‚ ë‹¤ì¤‘ í´ë¼ì´ì–¸íŠ¸   â”‚
               â”‚ ì§€ì›             â”‚
               â”‚                  â”‚
               â–¼                  â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  ë„¤íŠ¸ì›Œí¬ ì „ì†¡   â”‚    â”‚  ë¡œì»¬ ì²˜ë¦¬       â”‚
    â”‚  (ê³µìœ ê¸° ê²½ìœ )   â”‚    â”‚  (ë™ì¼ ì»´í“¨í„°)   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â”‚ ì••ì¶•ëœ ë°ì´í„°
               â”‚ Size: ~200-500 KB/frame (ì••ì¶• í›„)
               â”‚ IP: 192.168.10.6:8888
               â”‚
               â–¼

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ì»´í“¨í„° B (ë°ì´í„° ìˆ˜ì‹  ì¸¡)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

               â”‚ TCP í´ë¼ì´ì–¸íŠ¸
               â”‚ ì„œë²„ IP: 192.168.10.6
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         simple_draco_client (ì••ì¶• í•´ì œ í´ë¼ì´ì–¸íŠ¸)             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 1. TCP ì„œë²„ì— ì—°ê²°                                     â”‚  â”‚
â”‚  â”‚ 2. í—¤ë” ì •ë³´ ìˆ˜ì‹  ë° íŒŒì‹±                              â”‚  â”‚
â”‚  â”‚    - POINT_CLOUD: ë©”íƒ€ë°ì´í„°                          â”‚  â”‚
â”‚  â”‚    - FIELDS: í•„ë“œ ì •ë³´                                â”‚  â”‚
â”‚  â”‚ 3. ì••ì¶•ëœ ë°”ì´ë„ˆë¦¬ ë°ì´í„° ìˆ˜ì‹                           â”‚  â”‚
â”‚  â”‚ 4. Draco ì••ì¶• í•´ì œ                                     â”‚  â”‚
â”‚  â”‚    - í¬ì¸íŠ¸ ìœ„ì¹˜ ë³µì› (x,y,z)                         â”‚  â”‚
â”‚  â”‚    - Intensity ë³µì›                                   â”‚  â”‚
â”‚  â”‚ 5. PointCloud2 ë©”ì‹œì§€ ì¬êµ¬ì„±                           â”‚  â”‚
â”‚  â”‚    - ì›ë³¸ í—¤ë” ë³µì›                                    â”‚  â”‚
â”‚  â”‚    - í•„ë“œ ì •ë³´ ë³µì›                                    â”‚  â”‚
â”‚  â”‚ 6. ROS 2 í† í”½ìœ¼ë¡œ í¼ë¸”ë¦¬ì‹œ                             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â”‚ ROS 2 Topic: /lidar/decompressed
               â”‚ Type: sensor_msgs/PointCloud2
               â”‚ QoS: BestEffort
               â”‚ Size: ~2-5 MB/frame (ì›ë³¸ í¬ê¸°ë¡œ ë³µì›)
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              KISS-ICP (SLAM)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ â€¢ Voxel Downsampling (ë³µì…€ í¬ê¸°: 2.0)        â”‚    â”‚
â”‚  â”‚ â€¢ Point-to-Point ICP ì •í•©                    â”‚    â”‚
â”‚  â”‚   - Max iterations: 200                     â”‚    â”‚
â”‚  â”‚   - Convergence: 0.001                      â”‚    â”‚
â”‚  â”‚ â€¢ Adaptive Threshold                        â”‚    â”‚
â”‚  â”‚ â€¢ Local Map êµ¬ì¶• ë° ê´€ë¦¬                     â”‚    â”‚
â”‚  â”‚ â€¢ Odometry ì¶”ì • ë° í¼ë¸”ë¦¬ì‹œ                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â”œâ”€â–º ROS 2 Topic: /kiss/odometry
               â”‚   Type: nav_msgs/Odometry
               â”‚   (ë¡œë´‡ì˜ ìœ„ì¹˜ ë° ìì„¸ ì¶”ì •)
               â”‚
               â”œâ”€â–º TF Transform: odom â†’ base_link
               â”‚   (ì¢Œí‘œê³„ ë³€í™˜)
               â”‚
               â””â”€â–º RViz2 ì‹œê°í™”
                   (í¬ì¸íŠ¸ í´ë¼ìš°ë“œ + ê²½ë¡œ í‘œì‹œ)


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ë¶€ê°€ ëª¨ë‹ˆí„°ë§ ë„êµ¬                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  draco_web_monitor               â”‚
â”‚  â€¢ ì›¹ ì„œë²„ (Flask)                â”‚
â”‚  â€¢ ì‹¤ì‹œê°„ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§            â”‚
â”‚  â€¢ ì••ì¶•ë¥ , ëŒ€ì—­í­, ì§€ì—°ì‹œê°„ í‘œì‹œ   â”‚
â”‚  â€¢ ì ‘ì†: http://localhost:5000   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ ë°ì´í„° íë¦„ ìƒì„¸ ì„¤ëª…

### 1ë‹¨ê³„: ì„¼ì„œ ë°ì´í„° ìˆ˜ì§‘ (Ouster LiDAR)

**ì„¼ì„œ â†’ ë“œë¼ì´ë²„**

```
Ouster OS1/OS2 ì„¼ì„œ
â”œâ”€ í•´ìƒë„: 64/128 ì±„ë„
â”œâ”€ ì£¼íŒŒìˆ˜: 10 Hz
â”œâ”€ ë²”ìœ„: 0-120m
â”œâ”€ ë°ì´í„°: UDP íŒ¨í‚· ìŠ¤íŠ¸ë¦¼
â”‚  â”œâ”€ LiDAR í¬íŠ¸: 7502
â”‚  â””â”€ IMU í¬íŠ¸: 7503
â””â”€ ì¶œë ¥: ì•½ 131,000 í¬ì¸íŠ¸/í”„ë ˆì„
```

**ros2_ouster ë“œë¼ì´ë²„ ì²˜ë¦¬**
- UDP íŒ¨í‚· ìˆ˜ì‹  ë° ë””ì½”ë”©
- ì„¼ì„œ ìº˜ë¦¬ë¸Œë ˆì´ì…˜ ì ìš©
- í¬ì¸íŠ¸ í´ë¼ìš°ë“œ ìƒì„± (PCL)
- IMU ë°ì´í„° ë³€í™˜
- ì´ë¯¸ì§€ ìƒì„± (ê±°ë¦¬, ê°•ë„, ì£¼ë³€ê´‘)
- 2D ë ˆì´ì € ìŠ¤ìº” í•©ì„±

**ROS 2 í† í”½ í¼ë¸”ë¦¬ì‹œ**
```cpp
// pointcloud_processor.hpp:113-117
_pub->publish(
    ros2_ouster::toMsg(*_cloud, timestamp, _frame, override_ts));
```

---

### 2ë‹¨ê³„: Draco ì••ì¶• (simple_draco_bridge)

**ì…ë ¥: PointCloud2 ë©”ì‹œì§€**
```
sensor_msgs::msg::PointCloud2
â”œâ”€ header
â”‚  â”œâ”€ stamp: íƒ€ì„ìŠ¤íƒ¬í”„
â”‚  â””â”€ frame_id: "laser_sensor_frame"
â”œâ”€ height, width: í¬ì¸íŠ¸ í´ë¼ìš°ë“œ ì°¨ì›
â”œâ”€ fields: [x, y, z, intensity]
â”œâ”€ point_step: 16 bytes (4 floats)
â””â”€ data: ì›ì‹œ ë°”ì´ë„ˆë¦¬ ë°ì´í„° (~2-5 MB)
```

**ì••ì¶• í”„ë¡œì„¸ìŠ¤**

1. **ë°ì´í„° ê²€ì¦ ë° ì „ì²˜ë¦¬** (`simple_draco_bridge.cpp:232-314`)
   ```cpp
   // NaN, Inf ê°’ í•„í„°ë§
   if (std::isnan(x) || std::isnan(y) || std::isnan(z) ||
       std::isinf(x) || std::isinf(y) || std::isinf(z)) {
       x = y = z = 0.0f;
   }
   ```

2. **Draco í¬ì¸íŠ¸ í´ë¼ìš°ë“œ ìƒì„±**
   - Position attribute (x, y, z): 3D float
   - Intensity attribute: 1D float
   - Quantization: 11 bits (ì •ë°€ë„ vs ì••ì¶•ë¥  ê· í˜•)

3. **Draco ì••ì¶• ì—”ì§„** (`simple_draco_bridge.cpp:295-325`)
   ```cpp
   draco::Encoder encoder;
   encoder.SetSpeedOptions(compression_speed_, compression_speed_);
   encoder.SetAttributeQuantization(draco::GeometryAttribute::POSITION, 11);
   encoder.EncodePointCloudToBuffer(*point_cloud, &buffer);
   ```

4. **ì••ì¶• ì„±ëŠ¥**
   - ì••ì¶•ë¥ : **5-10:1** (ì„¤ì •ì— ë”°ë¼ ë³€ë™)
   - ì›ë³¸: ~2-5 MB â†’ ì••ì¶• í›„: ~200-500 KB
   - ì²˜ë¦¬ ì‹œê°„: ~20-50ms/frame
   - í’ˆì§ˆ ì†ì‹¤: ìµœì†Œ (ì–‘ìí™” 11ë¹„íŠ¸)

**ì¶œë ¥: TCP ì „ì†¡ + ROS í† í”½**

- **TCP ì†Œì¼“ ì „ì†¡** (`simple_draco_bridge.cpp:314-401`)
  ```
  í—¤ë” ì „ì†¡:
  POINT_CLOUD:size:frame_id:stamp_sec:stamp_nanosec:height:width:...
  
  í•„ë“œ ì „ì†¡:
  FIELDS:4
  FIELD:x:0:7:1
  FIELD:y:4:7:1
  FIELD:z:8:7:1
  FIELD:intensity:12:7:1
  
  ë°”ì´ë„ˆë¦¬ ë°ì´í„° ì „ì†¡ (64KB ì²­í¬)
  ```

- **ë¡œì»¬ ROS í† í”½**: `/lidar/compressed`

---

### 3ë‹¨ê³„: ë„¤íŠ¸ì›Œí¬ ì „ì†¡

**TCP í†µì‹  íŠ¹ì„±**
- í”„ë¡œí† ì½œ: TCP (ì‹ ë¢°ì„± ë³´ì¥)
- í¬íŠ¸: 8888 (ì„¤ì • ê°€ëŠ¥)
- ë©€í‹° í´ë¼ì´ì–¸íŠ¸: ì§€ì› (ë™ì‹œ ì—¬ëŸ¬ ìˆ˜ì‹ ê¸°)
- ë²„í¼ í¬ê¸°: 4MB (ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬)
- TCP_NODELAY: í™œì„±í™” (ì €ì§€ì—°)

**ë„¤íŠ¸ì›Œí¬ êµ¬ì„±**
```
ê³µìœ ê¸° (192.168.10.1)
â”œâ”€ ì»´í“¨í„° A: 192.168.10.6 (ì†¡ì‹ )
â”œâ”€ Ouster ì„¼ì„œ: 192.168.10.2
â””â”€ ì»´í“¨í„° B: 192.168.10.x (ìˆ˜ì‹ )
```

**ëŒ€ì—­í­ ì ˆê°**
- ì›ë³¸ ë°ì´í„°: ~5 MB Ã— 10 Hz = **50 MB/s** (400 Mbps)
- ì••ì¶• ë°ì´í„°: ~500 KB Ã— 10 Hz = **5 MB/s** (40 Mbps)
- ì ˆê°ë¥ : **90%** ëŒ€ì—­í­ ê°ì†Œ

---

### 4ë‹¨ê³„: ì••ì¶• í•´ì œ (simple_draco_client)

**TCP ì—°ê²° ë° ìˆ˜ì‹ ** (`simple_draco_client.cpp:133-320`)

1. **ì„œë²„ ì—°ê²°**
   ```cpp
   connect(client_socket_, 
           (struct sockaddr*)&server_addr, 
           sizeof(server_addr));
   ```

2. **í—¤ë” íŒŒì‹±**
   - ë©”íƒ€ë°ì´í„° ì¶”ì¶œ (í¬ê¸°, frame_id, timestamp ë“±)
   - í•„ë“œ ì •ë³´ ì¬êµ¬ì„±

3. **ì••ì¶• ë°ì´í„° ìˆ˜ì‹ **
   - ì²­í¬ ë‹¨ìœ„ ìˆ˜ì‹  (64KB)
   - ì™„ì „í•œ ë°ì´í„° ê²€ì¦

**Draco ì••ì¶• í•´ì œ** (`simple_draco_client.cpp:322-402`)

```cpp
draco::Decoder decoder;
auto geom = decoder.DecodePointCloudFromBuffer(&buffer);

// í¬ì¸íŠ¸ ë°ì´í„° ì¶”ì¶œ
for (int i = 0; i < point_cloud->num_points(); ++i) {
    pos_att->GetAttributeValue(
        draco::AttributeValueIndex(i), pos_val);
    
    // x, y, z, intensity ë³µì›
    msg.data[i * point_step + 0] = pos_val[0]; // x
    msg.data[i * point_step + 4] = pos_val[1]; // y
    msg.data[i * point_step + 8] = pos_val[2]; // z
    msg.data[i * point_step + 12] = intensity;  // intensity
}
```

**PointCloud2 ì¬êµ¬ì„± ë° í¼ë¸”ë¦¬ì‹œ**
- ì›ë³¸ í—¤ë” ë³µì›
- í•„ë“œ ì •ë³´ ë³µì›
- ROS 2 í† í”½ `/lidar/decompressed`ë¡œ í¼ë¸”ë¦¬ì‹œ

---

### 5ë‹¨ê³„: SLAM ì²˜ë¦¬ (KISS-ICP)

**ì…ë ¥: ì••ì¶• í•´ì œëœ í¬ì¸íŠ¸ í´ë¼ìš°ë“œ**

**KISS-ICP ì•Œê³ ë¦¬ì¦˜ ë‹¨ê³„**

1. **ì „ì²˜ë¦¬**
   - Voxel Downsampling (2.0m ë³µì…€)
   - ë²”ìœ„ í•„í„°ë§ (max: 50m)
   - ìµœì†Œ ê±°ë¦¬ í•„í„° (min: 1m)

2. **ICP ì •í•©**
   ```
   í˜„ì¬ í”„ë ˆì„ â†’ Local Map ë§¤ì¹­
   â”œâ”€ ìµœëŒ€ ë°˜ë³µ: 200íšŒ
   â”œâ”€ ìˆ˜ë ´ ê¸°ì¤€: 0.001
   â””â”€ ì¶œë ¥: ë³€í™˜ í–‰ë ¬ (Translation + Rotation)
   ```

3. **ë¡œì»¬ ë§µ ì—…ë°ì´íŠ¸**
   - ìƒˆ í¬ì¸íŠ¸ ì¶”ê°€
   - ì˜¤ë˜ëœ í¬ì¸íŠ¸ ì œê±°
   - ë³µì…€ ê¸°ë°˜ ì„œë¸Œìƒ˜í”Œë§

4. **Odometry ê³„ì‚°**
   - ìƒëŒ€ ë³€í™˜ â†’ ì ˆëŒ€ í¬ì¦ˆ ë³€í™˜
   - ê³µë¶„ì‚° ì¶”ì •
   - TF ë¸Œë¡œë“œìºìŠ¤íŠ¸

**ì¶œë ¥**
- Odometry í† í”½: `/kiss/odometry`
- TF: `odom` â†’ `base_link`
- ë””ë²„ê·¸ í´ë¼ìš°ë“œ: `/kiss/local_map`, `/kiss/frame`

---

## ğŸ“ˆ ì„±ëŠ¥ ì§€í‘œ

### ì••ì¶• ì„±ëŠ¥
```
ì›ë³¸ í¬ê¸°:      2.1 MB
ì••ì¶• í¬ê¸°:      245 KB
ì••ì¶•ë¥ :         8.6:1
ì••ì¶• ë¹„ìœ¨:      88.3%
ì²˜ë¦¬ ì‹œê°„:      ~35ms
ì£¼íŒŒìˆ˜:         10 Hz (ì‹¤ì‹œê°„)
```

### ë„¤íŠ¸ì›Œí¬ ì„±ëŠ¥
```
ëŒ€ì—­í­ (ì›ë³¸):  400 Mbps
ëŒ€ì—­í­ (ì••ì¶•):  40 Mbps
ì ˆê°ë¥ :         90%
ì§€ì—°ì‹œê°„:       <5ms (ë¡œì»¬ ë„¤íŠ¸ì›Œí¬)
íŒ¨í‚· ì†ì‹¤:      0% (TCP)
```

### SLAM ì„±ëŠ¥
```
ì…ë ¥ í¬ì¸íŠ¸:    ~131,000 points
ë‹¤ìš´ìƒ˜í”Œë§ í›„:  ~10,000 points
ì²˜ë¦¬ ì£¼íŒŒìˆ˜:    5-8 Hz
ê¶¤ì  ì •í™•ë„:    <1% drift (100m ì´ë™ ê¸°ì¤€)
```

---

## ğŸ”§ ì£¼ìš” ì„¤ì • íŒŒë¼ë¯¸í„°

### Ouster ë“œë¼ì´ë²„
```yaml
lidar_ip: 192.168.10.2
computer_ip: 192.168.10.6
lidar_mode: "1024x10"
proc_mask: IMG|PCL|IMU|SCAN
```

### Draco Bridge
```bash
input_topic: /ouster/points
output_topic: /lidar/compressed
server_port: 8888
quantization_bits: 11    # 7-14 (ë†’ì„ìˆ˜ë¡ í’ˆì§ˆâ†‘ ì••ì¶•ë¥ â†“)
compression_speed: 5     # 0-10 (ë†’ì„ìˆ˜ë¡ ì†ë„â†‘ ì••ì¶•ë¥ â†“)
```

### Draco Client
```bash
server_host: 192.168.10.6
server_port: 8888
output_topic: /lidar/decompressed
```

### KISS-ICP
```yaml
voxel_size: 2.0          # ë³µì…€ í¬ê¸° (m)
max_range: 50.0          # ìµœëŒ€ ë²”ìœ„ (m)
max_num_iterations: 200  # ICP ë°˜ë³µ íšŸìˆ˜
deskew: False            # ëª¨ì…˜ ë³´ì •
```

---

## ğŸš€ ì‹¤í–‰ ìˆœì„œ

### ìµœì†Œ êµ¬ì„± (ë¡œì»¬ í…ŒìŠ¤íŠ¸)
```bash
# í„°ë¯¸ë„ 1: Ouster
ros2 launch ros2_ouster driver_launch.py

# í„°ë¯¸ë„ 2: Bridge
ros2 run draco_bridge_cpp simple_draco_bridge \
  --ros-args -p input_topic:=/ouster/points

# í„°ë¯¸ë„ 3: Client (ë¡œì»¬)
ros2 run draco_bridge_cpp simple_draco_client

# í„°ë¯¸ë„ 4: SLAM
ros2 launch kiss_icp odometry.launch.py \
  topic:=/lidar/decompressed \
  config_file:=config/kiss_icp_fast.yaml
```

### ë„¤íŠ¸ì›Œí¬ êµ¬ì„± (ë‹¤ë¥¸ ì»´í“¨í„°)

**ì»´í“¨í„° A (ì„¼ì„œ + ë¸Œë¦¬ì§€)**
```bash
ros2 launch ros2_ouster driver_launch.py &
ros2 run draco_bridge_cpp simple_draco_bridge \
  --ros-args -p input_topic:=/ouster/points
```

**ì»´í“¨í„° B (í´ë¼ì´ì–¸íŠ¸ + SLAM)**
```bash
ros2 run draco_bridge_cpp simple_draco_client \
  --ros-args -p server_host:=192.168.10.6 &
  
ros2 launch kiss_icp odometry.launch.py \
  topic:=/lidar/decompressed \
  config_file:=config/kiss_icp_fast.yaml
```

---

## ğŸ¯ ì£¼ìš” ê¸°ëŠ¥

### 1. ì‹¤ì‹œê°„ ì••ì¶•
- Google Draco ê¸°ë°˜ ì†ì‹¤ ì••ì¶•
- 5-10ë°° ì••ì¶•ë¥ 
- ìµœì†Œ í’ˆì§ˆ ì†ì‹¤

### 2. ë„¤íŠ¸ì›Œí¬ ì „ì†¡
- TCP ê¸°ë°˜ ì‹ ë¢°ì„± ì „ì†¡
- ë©€í‹° í´ë¼ì´ì–¸íŠ¸ ì§€ì›
- ìë™ ì¬ì—°ê²°

### 3. SLAM í†µí•©
- KISS-ICP ê¸°ë°˜ Odometry
- ì‹¤ì‹œê°„ ì§€ë„ ìƒì„±
- RViz2 ì‹œê°í™”

### 4. ëª¨ë‹ˆí„°ë§
- ì›¹ ê¸°ë°˜ ëŒ€ì‹œë³´ë“œ
- ì‹¤ì‹œê°„ ì„±ëŠ¥ ì§€í‘œ
- ì••ì¶•ë¥  ë° ëŒ€ì—­í­ í‘œì‹œ

---

## ğŸ“Š ì‹œìŠ¤í…œ ìš”êµ¬ì‚¬í•­

### í•˜ë“œì›¨ì–´
- CPU: Intel i5 ì´ìƒ (ë©€í‹°ì½”ì–´ ê¶Œì¥)
- RAM: 4GB ì´ìƒ
- ë„¤íŠ¸ì›Œí¬: ê¸°ê°€ë¹„íŠ¸ ì´ë”ë„· (ìœ ì„  ê¶Œì¥)
- ì €ì¥ê³µê°„: 10GB ì´ìƒ

### ì†Œí”„íŠ¸ì›¨ì–´
- Ubuntu 22.04 LTS
- ROS 2 Humble
- Python 3.10+
- CMake 3.24+ (KISS-ICPìš©)

---

## ğŸ” ë¬¸ì œ í•´ê²°

### QoS ë¶ˆì¼ì¹˜
**ì¦ìƒ**: "incompatible QoS" ê²½ê³ 
**í•´ê²°**: BestEffort QoS ì‚¬ìš© (ì„¼ì„œ ë°ì´í„° í‘œì¤€)

### UDP í¬íŠ¸ ì¶©ëŒ
**ì¦ìƒ**: "Transport endpoint is not connected"
**í•´ê²°**: `pkill -9 ouster_driver`

### ì••ì¶• ì‹¤íŒ¨
**ì¦ìƒ**: "Failed to encode point cloud"
**í•´ê²°**: NaN/Inf ê°’ í•„í„°ë§ (ì´ë¯¸ êµ¬í˜„ë¨)

### ë„¤íŠ¸ì›Œí¬ ì—°ê²° ì‹¤íŒ¨
**ì¦ìƒ**: "Failed to connect to server"
**í•´ê²°**: IP ì£¼ì†Œ ë° ë°©í™”ë²½ í™•ì¸

---

## ğŸ“ ì°¸ê³  ìë£Œ

- [Ouster ROS 2 Driver](https://github.com/ros-drivers/ros2_ouster_drivers)
- [Google Draco](https://github.com/google/draco)
- [KISS-ICP](https://github.com/PRBonn/kiss-icp)
- [ROS 2 Humble Documentation](https://docs.ros.org/en/humble/)

